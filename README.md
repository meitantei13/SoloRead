# Solo Read
誰にも見られない、自分だけの読書管理アプリ

---

## 目次
- [サービス概要](#サービス概要)
- [主な機能](#主な機能)
- [技術スタック](#技術スタック)
- [画像イメージ](#画像イメージ)
- [システム構成図](#システム構成図)
- [設計で工夫した点](#設計で工夫した点)
  - [完全非公開設計](#完全非公開設計)
  - [Rails API ✕ Next.js の分離構成](#rails-api--nextjs-の分離構成)
  - [ゲストユーザーの仕様設計](#ゲストユーザーの仕様設計)
- [苦労した点・学んだこと](#苦労した点学んだこと)
  - [ログインが不安定になる問題の原因調査と改善](#ログインが不安定になる問題の原因調査と改善)
  - [ゲストユーザーの自動削除機能の実装](#ゲストユーザーの自動削除機能の実装)
  - [読了日登録時のカレンダーUIの調整](#読了日登録時のカレンダーuiの調整)
- [ユーザーフィードバックをもとに改善した点](#ユーザーフィードバックをもとに改善した点)
- [今後の改善予定](#今後の改善予定)
---

## サービス概要
「Solo Read」は、誰にも見られない **自分のための読書記録** に特化した個人用読書管理アプリです。

多くの読書記録アプリでは、感想を登録すると自動で公開され、他ユーザーの目に触れるものが多くあります。

そのため、読書の感想を書く際に
- 他ユーザーの評価を意識してしまう
- 本音よりも無難な感想になってしまう
- 「自分の素直な感想記録」にならない

と感じることがありました。

そこで、誰からも見られないことを前提に、**素直な感想や考えをそのまま残せる自分専用の読書管理アプリ** として「Solo Read」を開発しました。

---

## 主な機能
- **ユーザー登録（メール認証あり） / ログイン・ログアウト**
  メールアドレスとパスワードによる登録後、認証メールで本人確認を行う認証フローを実装

- **ゲストログイン**
  アカウント作成せずに、すぐにアプリを体験可能

- **読書記録の登録・編集・削除**
  読んだ本の感想や気づきを自由に記録

- **下書き保存機能**
  読書中の感想を途中で保存し、後から編集可能

- **読書記録一覧**
  これまで読んだ本を一覧で表示

- **下書き一覧**
  保存中の下書き記事を一覧で表示

- **読書記録の検索（非同期）**
  本一覧&検索ページ上部の検索バーから即時検索が可能

- **読書冊数の可視化（マイページ）**
  今月・今年・累計で読書量を確認可能
---

## 技術スタック

| 分類 | 技術 |
| --- | --- |
| フロントエンド | Next.js / TypeScript |
| バックエンド | Ruby on Rails (APIモード) |
| 認証 | Devise / Devise Token Auth |
| データベース | MySQL |
| 非同期処理 | Sidekiq (sidekiq-cron) |
| キャッシュ / キュー | Redis |
| インフラ | AWS |
| 開発環境 | Docker / Docker Compose |

フロントエンドでは Next.js を使用し、Rails API と通信する SPA 構成としています。  
データ取得には SWR を用い、キャッシュや再検証を行っています。  

※ フロントエンドでは MUI / shadcn/ui を用いてUIを構築し、ESLint / Prettier によるコード品質の維持を行っています。
バックエンドでは RSpec を用いたテストを導入しています。

---

## 画像イメージ
デプロイ後に画像作成予定

---
## 図解
### インフラ構成図
#### 全体構成
- フロントエンドとバックエンドを AWS 上で分離構成として構築
- Route53 による DNS 管理
- ACM による SSL/TLS 証明書の管理
- ALB を経由して Frontend / Backend へリクエストを振り分け

#### フロントエンド (ECS / Fargate)
- Next.js を Docker コンテナとして ECS 上で実行
- ALB 経由でアクセスを受け付ける構成
- GitHub Actions を用いた CI / CD により自動デプロイパイプラインを構築

#### バックエンド (ECS / Fargate)
- Rails API を Docker コンテナとして ECS 上で実行
- データベースは RDS(MySQL) を Private Subnet に配置
- GitHub Actions と ECR を連携した自動デプロイパイプラインを構築

![Image](https://github.com/user-attachments/assets/fd19c35d-1e63-42e7-9085-35a06b40e519)

### ER図
- ユーザーことに読書記録を管理するため、User と Book を**１対多**の関係で設計しています

![Image](https://github.com/user-attachments/assets/adbb454c-0c5f-476b-a3cf-113ba1eb0bc2)

---

## 設計で工夫した点
### 完全非公開設計
本アプリは、誰にも見られない「自分だけの読書記録」を前提としているため、他ユーザーのデータが表示・検索されない完全非公開設計としています。  
全ての読書記録はユーザー単位で管理し、認証されたユーザー本人のみが自分のデータにアクセスできるようにしています。

### Rails API ✕ Next.js の分離構成
バックエンドは Rails を API モードで構築し、  
フロントエンドは Next.js による SPA 構成としています。  
責務を分離することで、フロントエンドとバックエンドを独立して開発・保守できる構成を意識しました。

### ゲストユーザーの仕様設計
ゲストログイン機能を実装するにあたり、**１つのアカウントを使い回す方法** と **利用ごとに新規ゲストユーザーを作成する方法** の２案を検討しました。  
複数人が同時に利用できることや、他人のデータが残らないことを重視し、後者の仕様を採用しました。  
その結果、一定期間経過後に不要となるデータが発生することを想定し、データのライフサイクルを意識した設計を行いました。

---

## 苦労した点・学んだこと
### ログインが不安定になる問題の原因調査と改善
ログインできる時とできない時が交互に発生する現象が起き、登録ユーザー・ゲストユーザーの両方で同現象が確認されました。  
認証トークンだけでなく、フロントエンド側のユーザー状態管理にも原因があると考え、ログアウト時の状態を見直しました。  
その結果、認証情報の取得状態を適切に初期化することで、ログイン処理が安定するようになり、状態管理の重要性を学びました。

### ゲストユーザーの自動削除機能の実装
新規ゲストユーザーを都度作成する仕様にしたことで、不要となるゲストユーザーのデータをどのように削除するか悩みました。  
当初は別の方法で定期削除を実装しようとしましたが、エラーが多発し、実装を完了させることができませんでした。  
そのため、実行方法を見直し、Rails アプリケーション内で定期処理を管理できる構成へ切り替えました。  
この経験から、実装が難航した場合でも要件を見直し、別の方法を検討する柔軟さの重要性を学びました。

### 読了日登録時のカレンダーUIの調整
当初は読了日を文字列入力で受け付けていましたが、入力の手間やミスを減らすために、カレンダーから日付を選択できるUIに変更しました。  
実装にあたっては、カレンダーUIが扱う Date 型と、フォームやAPIで扱う文字列形式の違いを意識する必要があり、日付データの管理方法に苦労しました。  
表示用の日付、フォームの値、バックエンドへ送信するデータをそれぞれ整理しながら実装することで、UIとデータの役割を分けて設計する重要性を学びました。

---

## ユーザーフィードバックをもとに改善した点
- **記事登録・編集時に入力した改行が、記事詳細画面で反映されない**  
実際の利用者からの指摘を受け、表示方法を見直すことで、入力時の改行がそのまま表示に反映されるよう改善しました。
---
## 今後の改善予定
- 記事一覧について、読了日の昇順・降順を切り替えられる並び替え機能の追加を検討しています。